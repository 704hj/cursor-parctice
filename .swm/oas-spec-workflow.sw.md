---
title: OAS Spec ê¸°ë°˜ ê°œë°œ ì›Œí¬í”Œë¡œìš°
---
# ğŸ¯ ì´ í”„ë¡œì íŠ¸ì˜ API ê°œë°œ ë°©ì‹

ì´ í”„ë¡œì íŠ¸ëŠ” **Contract-First** ë°©ì‹ìœ¼ë¡œ ê°œë°œë©ë‹ˆë‹¤. ì¦‰, APIë¥¼ ë¨¼ì € ì •ì˜í•˜ê³ (`openapi.yaml`), ê·¸ ì •ì˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íƒ€ì…ê³¼ ì½”ë“œë¥¼ ìë™ ìƒì„±í•©ë‹ˆë‹¤.

## ğŸ“ 1ë‹¨ê³„: API ê³„ì•½ ì •ì˜

<SwmSnippet path="/openapi.yaml" line="5">

---

ì˜ˆì‹œ: ë‰´ìŠ¤ ëª©ë¡ API ì •ì˜

- ê²½ë¡œ: `GET /news`
- ì‘ë‹µ: `NewsList` ìŠ¤í‚¤ë§ˆ
- Mock ë°ì´í„° ì˜ˆì‹œë„ í¬í•¨

```yaml
paths:
  /news:
    get:
      summary: Get news list
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema: { $ref: "#/components/schemas/NewsList" }
              examples:
                default:
                  value:
                    items:
                      - id: "art-001"
                        title: "í—¤ë“œë¼ì¸"
```

---

</SwmSnippet>

## ğŸ”§ 2ë‹¨ê³„: TypeScript íƒ€ì… ìë™ ìƒì„±

<SwmPath>[openapi.yaml](/openapi.yaml)</SwmPath>ì„ ê¸°ë°˜ìœ¼ë¡œ íƒ€ì…ì´ ìë™ ìƒì„±ë©ë‹ˆë‹¤:

```bash
npx openapi-typescript openapi.yaml -o src/types/api.d.ts
```

<SwmSnippet path="/src/types/api.d.ts" line="1">

---

ìë™ ìƒì„±ëœ íƒ€ì… íŒŒì¼ - **ì ˆëŒ€ ìˆ˜ë™ìœ¼ë¡œ ìˆ˜ì •í•˜ì§€ ë§ˆì„¸ìš”!**

```typescript
/**
 * This file was auto-generated by openapi-typescript.
 * Do not make direct changes to the file.
 */
```

---

</SwmSnippet>

## ğŸ¨ 3ë‹¨ê³„: Type-Safe API Client

<SwmSnippet path="/src/api/client.ts" line="1">

---

`openapi-fetch`ë¡œ íƒ€ì… ì•ˆì „í•œ API í´ë¼ì´ì–¸íŠ¸ ìƒì„±

```typescript
import createClient from "openapi-fetch";
import { paths } from "../types/api";

export const api = createClient<paths>({
  baseUrl: process.env.NEXT_PUBLIC_API_BASE,
});
```

---

</SwmSnippet>

<SwmSnippet path="/src/api/news.ts" line="1">

---

API í˜¸ì¶œ í•¨ìˆ˜ - íƒ€ì…ì´ ìë™ìœ¼ë¡œ ì¶”ë¡ ë©ë‹ˆë‹¤

```typescript
import { api } from "./client";

export async function fetchNews() {
  const { data, error } = await api.GET("/news");
  if (error) {
    throw new Error("API error: " + JSON.stringify(error));
  }
  return data; // data íƒ€ì…ì´ ìë™ìœ¼ë¡œ ì¶”ë¡ ë¨!
}
```

---

</SwmSnippet>

## âš›ï¸ 4ë‹¨ê³„: React Query í›…

<SwmSnippet path="/src/hooks/useNews.ts" line="1">

---

React Queryë¡œ ë°ì´í„° í˜ì¹­ ê´€ë¦¬

```typescript
import { useQuery } from "@tanstack/react-query";
import { fetchNews } from "../api/news";

export function useNews() {
  return useQuery({
    queryKey: ["news"],
    queryFn: fetchNews,
  });
}
```

---

</SwmSnippet>

## ğŸ–¥ï¸ 5ë‹¨ê³„: ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©

<SwmSnippet path="/app/news-hooks/page.tsx" line="1">

---

ì‹¤ì œ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš© - íƒ€ì… ì•ˆì „!

```typescript
"use client";

import { useFetchNews, useNewsItem } from "@/src/hooks/useNews";

export default function NewsHooksPage() {
  // openapi.yaml ê¸°ë°˜ìœ¼ë¡œ AIê°€ ë§Œë“  í›… ì‚¬ìš©!
  const { data, isLoading, error } = useFetchNews();

  if (isLoading) return <div>ë¡œë”© ì¤‘...</div>;
  if (error) return <div>ì—ëŸ¬ ë°œìƒ: {String(error)}</div>;

  return (
    <main style={{ padding: 20 }}>
      <h1>ë‰´ìŠ¤ ëª©ë¡ (React Query í›… ì‚¬ìš©)</h1>
      <p style={{ color: "#666" }}>
        openapi.yaml â†’ AIê°€ í›… ìƒì„± â†’ ì—¬ê¸°ì„œ ì‚¬ìš©!
      </p>

      <div style={{ marginTop: 20 }}>
        {data?.items?.map((news) => (
          <div
            key={news.id}
            style={{
              border: "1px solid #ddd",
              padding: 16,
              marginBottom: 16,
              borderRadius: 8,
            }}
          >
            {news.image && (
              // eslint-disable-next-line @next/next/no-img-element
              <img
                src={news.image}
                alt={news.title}
                style={{ width: "100%", borderRadius: 4 }}
              />
            )}
            <h2 style={{ margin: "12px 0 8px" }}>{news.title}</h2>
            <p style={{ color: "#666", margin: 0 }}>{news.summary}</p>
            <p style={{ fontSize: 12, color: "#999", marginTop: 8 }}>
              ID: {news.id}
            </p>
          </div>
        ))}
      </div>
    </main>
  );
}
```

---

</SwmSnippet>

## ğŸ­ Mock ì„œë²„ (ë°±ì—”ë“œ ì™„ì„± ì „)

ë°±ì—”ë“œ ê°œë°œ ì „ì— Prism Mock ì„œë²„ë¡œ ê°œë°œ ê°€ëŠ¥:

```bash
npm run mock
```

<SwmPath>[openapi.yaml](/openapi.yaml)</SwmPath>ì˜ `examples`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê°€ì§œ ì‘ë‹µì„ ë°˜í™˜í•©ë‹ˆë‹¤.

## âœ¨ í•µì‹¬ í¬ì¸íŠ¸

### âœ… ì¥ì 

1. **íƒ€ì… ì•ˆì „**: ì»´íŒŒì¼ íƒ€ì„ì— API ì˜¤ë¥˜ ë°œê²¬
2. **ë³‘ë ¬ ê°œë°œ**: ë°±ì—”ë“œ ì™„ì„± ì „ì— í”„ë¡ íŠ¸ ê°œë°œ ê°€ëŠ¥
3. **ë‹¨ì¼ ì¶œì²˜**: API ë³€ê²½ì‚¬í•­ì´ ëª¨ë“  ê³³ì— ìë™ ë°˜ì˜
4. **ìë™í™”**: íƒ€ì… ìƒì„±, ë¬¸ì„œ ìƒì„±, Mock ì„œë²„ ëª¨ë‘ ìë™

### âš ï¸ ì£¼ì˜ì‚¬í•­

1. `src/types/api.d.ts`ëŠ” ì ˆëŒ€ ìˆ˜ë™ ìˆ˜ì • ê¸ˆì§€
2. API ë³€ê²½ ì‹œ ë°˜ë“œì‹œ `openapi.yaml`ë¶€í„° ìˆ˜ì •
3. íƒ€ì… ì¬ìƒì„± í•„ìš”: `npx openapi-typescript openapi.yaml -o src/types/api.d.ts`

## ğŸ”„ ì „ì²´ ì›Œí¬í”Œë¡œìš° ìš”ì•½

```
1. ë°±+í”„ë¡ íŠ¸ í˜‘ì˜ â†’ openapi.yaml ì‘ì„±
        â†“
2. íƒ€ì… ìƒì„±: npx openapi-typescript
        â†“
3. API í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„ (src/api/)
        â†“
4. React Query í›… ìƒì„± (src/hooks/)
        â†“
5. ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©
        â†“
6. Mock ì„œë²„ë¡œ í…ŒìŠ¤íŠ¸ (npm run mock)
        â†“
7. ë°±ì—”ë“œ ì™„ì„± í›„ ì‹¤ì œ APIë¡œ ì „í™˜
```

## ğŸ“š ê´€ë ¨ íŒŒì¼

- <SwmPath>[openapi.yaml](/openapi.yaml)</SwmPath> - API ì •ì˜
- <SwmPath>[src/types/api.d.ts](/src/types/api.d.ts)</SwmPath> - ìë™ ìƒì„±ëœ íƒ€ì…
- <SwmPath>[src/api/client.ts](/src/api/client.ts)</SwmPath> - API í´ë¼ì´ì–¸íŠ¸
- <SwmPath>[src/api/news.ts](/src/api/news.ts)</SwmPath> - API í•¨ìˆ˜ë“¤
- <SwmPath>[src/hooks/useNews.ts](/src/hooks/useNews.ts)</SwmPath> - React Query í›…

## ğŸ†˜ ì‹ ê·œ ì…ì‚¬ìë¥¼ ìœ„í•œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] `npm install` ì‹¤í–‰
- [ ] `.env.local` íŒŒì¼ ìƒì„± (`NEXT_PUBLIC_API_BASE` ì„¤ì •)
- [ ] `npm run mock` ì‹¤í–‰í•˜ì—¬ Mock ì„œë²„ í…ŒìŠ¤íŠ¸
- [ ] `npm run dev` ì‹¤í–‰í•˜ì—¬ ê°œë°œ ì„œë²„ ì‹œì‘
- [ ] `/news-hooks` í˜ì´ì§€ì—ì„œ ë°ì´í„° í™•ì¸

<SwmMeta version="3.0.0" repo-id="Z2l0aHViJTNBJTNBY3Vyc29yLXBhcmN0aWNlJTNBJTNBNzA0aGo=" repo-name="cursor-parctice"><sup>Powered by [Swimm](https://app.swimm.io/)</sup></SwmMeta>
